---
import "../styles/global.css";
import { PAGES } from "@lib/constants";

const currentPage = PAGES.find((p) => p.link === Astro.url.pathname)?.title || Astro.url.pathname;
---

<div id="navbar">
	<div class="sticky z-10 flex h-16 w-full items-center bg-black px-5">
		<svg
			id="navbar-icon"
			xmlns="http://www.w3.org/2000/svg"
			class="h-8 w-8 text-white"
			fill="none"
			viewBox="0 0 24 24"
			stroke="currentColor"
			stroke-width="2"
		>
			<path stroke-linecap="round" stroke-linejoin="round" d="M6 4v16M12 4v16M18 4v16"></path>
		</svg>
		<h1 class="absolute left-1/2 -translate-x-1/2 self-center font-extrabold text-white">
			You are currently at <span class="navbar-current-page">{currentPage}</span>
		</h1>
	</div>
	<div id="navbar-overlay" class="fixed top-16 right-0 bottom-0 left-0 z-9"></div>
</div>

<script src="../scripts/navbar.ts"></script>

<style>
	#navbar-overlay {
		will-change: transform, opacity;
		transform: translateY(-100%);
		opacity: 0;
		pointer-events: none;
		transition:
			transform 300ms cubic-bezier(0.2, 0.8, 0.2, 1),
			opacity 200ms ease;
	}

	#navbar-overlay.navbar-canvas-open {
		transform: translateY(0);
		opacity: 1;
		pointer-events: auto;
	}

	.navbar-current-page {
		background: linear-gradient(
			90deg,
			hsl(0 100% 50%) 0%,
			hsl(60 100% 50%) 16.67%,
			hsl(120 100% 50%) 33.33%,
			hsl(180 100% 50%) 50%,
			hsl(240 100% 50%) 66.67%,
			hsl(300 100% 50%) 83.33%,
			hsl(360 100% 50%) 100%
		);
		background-clip: text;
		color: transparent;
		filter: hue-rotate(0deg);
		animation: rainbow-hue 2s linear infinite;
		will-change: filter;
	}

	@keyframes rainbow-hue {
		to {
			filter: hue-rotate(360deg);
		}
	}
</style>
